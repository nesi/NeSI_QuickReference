\documentclass[final,t]{beamer}
\mode<presentation>
{
  \usetheme{NeSI}
%  \usetheme{Aachen}
%  \usetheme{Oldi6}
%  \usetheme{I6td}
%  \usetheme{I6dv}
%  \usetheme{I6pd}
%  \usetheme{I6pd2}
}
% additional settings
\setbeamerfont{itemize}{size=\normalsize}
\setbeamerfont{itemize/enumerate body}{size=\normalsize}
\setbeamerfont{itemize/enumerate subbody}{size=\normalsize}

% additional packages
\usepackage{times}
\usepackage{amsmath, amsthm, amssymb, soul, color, multicol, type1cm, verbatim, latexsym, float,multicol}
\usepackage{exscale}
%\boldmath
\usepackage{booktabs, array}
%\usepackage{rotating} %sideways environment
\usepackage[english]{babel}
\usepackage[latin1]{inputenc}
%\usepackage[orientation=landscape,size=custom,width=200,height=120,scale=1.9]{beamerposter}
\usepackage[orientation=landscape,size=a4]{beamerposter}
\listfiles
\graphicspath{{figures/}}
% Display a grid to help align images
%\beamertemplategridbackground[1cm]

\usepackage{listings}
\usepackage{xspace}
\usepackage{fp}
\usepackage{ifthen}

\title{\huge Quick Reference Guide to the High Performance Computer Environments @ Pan Cluster}
\author{New Zealand eScience Infrastructure}
\institute[]{
  New Zealand eScience Infrastructure (\href{https://www.nesi.org.nz/}{NeSI}) \\
  a partnership for all New Zealand researchers delivered by \\
  \href{http://www.eresearch.auckland.ac.nz/}{The University of Auckland}, \href{http://www.niwa.co.nz/our-services/hpcf}{NIWA}, \href{http://www.bluefern.canterbury.ac.nz/}{University of Canterbury}, \\
  \href{http://www.landcareresearch.co.nz/}{Landcare Research}, \href{http://www.otago.ac.nz/}{Otago University} and \href{http://msi.govt.nz/}{MBIE}
}

% abbreviations
\makeatletter
\makeatother

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{document}
\begin{frame}[fragile]{} 
  \begin{columns}[t]
    \begin{column}{.32\linewidth}

      %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

      \begin{block}{Contact Information}
        \begin{itemize}
        \item \textbf{web}: \url{http://www.nesi.org.nz}
        \item \textbf{wiki}: \url{https://wiki.auckland.ac.nz/display/CERES/}
        \item \textbf{ganglia}: \url{http://ganglia.uoa.nesi.org.nz}
        \item \textbf{support} : \href{mailto:support@nesi.org.nz}{support@nesi.org.nz}
        \end{itemize}
        \vspace*{-1.5cm}
        \hspace*{7cm}
        \includegraphics[width=1.4cm]{img/qrcode.png} 
      \end{block}

      %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
      \begin{block}{Useful Quick References}
        \vspace*{-3ex}
        \begin{multicols}{2}
        \begin{itemize}
        \item \href{https://wiki.auckland.ac.nz/download/attachments/37950883/vi+Quick+Reference.pdf}{VI Quick Reference}
        \item \href{https://wiki.auckland.ac.nz/download/attachments/37950883/Bash+Quick+Reference.pdf}{BASH Quick Reference} 
        \item \href{https://wiki.auckland.ac.nz}{Linux Quick Reference}
        \item \href{https://wiki.auckland.ac.nz/download/attachments/37950883/OpenMP3.1-FortranCard.pdf}{OpenMP Fortran Syntax}
        \item \href{https://wiki.auckland.ac.nz/download/attachments/37950883/OpenMP3.1-CCard.pdf}{OpenMP 3.1 API C/C++ Syntax}
        \item \href{https://wiki.auckland.ac.nz}{MPI Quick Reference}
        \end{itemize}
        \end{multicols}
        \vspace*{-3ex}
      \end{block}
      %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

      %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
      \begin{block}{Hardware Information}
        \vspace*{-2ex}
      \begin{center}
      \begin{tabular}{|c|c|c|c|c|}
      \hline 
      \textbf{Architecture} & \textbf{Westmere} & \textbf{SandyBridge} & \textbf{LargeMem} & \textbf{GPU} \\ 
      \hline 
      Model & X5660 & E5-2680 & E7-4870 & X5660 (M2090) \\ 
      \hline 
      Clock Speed & 2.8 GHz & 2.7 GHz & 2.4GHz & 2.8 (1.3)GHz\\ 
      \hline 
      Cache & 12MB & 20MB & 30MB & 12MB\\ 
      \hline 
      Intel QPI speed & 6.4GT/s & 8 GT/s & 6.4GT/ & 6.4GT/s\\ 
      \hline 
      Cores/socket & 6 & 8 & 10 & 6(512)\\ 
      \hline       
      Cores/node & 12 & 16 & 40 & 12(1024)\\ 
      \hline 
      Mem/node & 96GB & 128GB & 512GB & 96GB(6GB)\\ 
      \hline 
      GFLOPS/node & 134.4 & 172.8 & 384.0 & 134.4 (1330DP)\\ 
      \hline 
      \end{tabular} 
      \end{center}
        \vspace*{-2ex}
      \end{block}
      %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


      %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
      \begin{block}{Disk Spaces + Default Quota}
        \vspace*{-2ex}
      \begin{center}
      \begin{tabular}{|l|c|c|c|c|c|c|}
      \hline 
      \textbf{FileSystem} & \textbf{Space} & \textbf{Quota} & \textbf{ACL} & \textbf{Backup} & \textbf{Type} & \textbf{Usage}  \\ 
      \hline 
      \$HOME & 120TB & 30GB & rw & yes & GPFS & Archive \\ 
      \hline 
      /share & 120TB & - & ro & yes & GPFS & Archive \\ 
      \hline 
      \$TMP\_DIR & 240GB & - & rw & NO & EXT4 & io \\ 
      \hline 
      \$SCRATCH\_DIR & 8.8TB & - & rw & NO & GPFS & io \\ 
      \hline 
      \end{tabular} 
      \end{center}
        \vspace*{-2ex}
      \end{block}
      %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
 
 

        %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
      \begin{block}{Environment Modules}
      \textbf{Environment Modules} is very useful to manage environment variables for each application and it is very easy to use. It loads the needed environment by a certain application and its dependencies automatically.
        \begin{itemize}
        \item  \textbf{module avail} - lists available modules
        \item  \textbf{module show module\_name} - displays full information about the module with name \textit{module\_name}.
        \item  \textbf{module load module\_name} - loads the module with name \textit{module\_name} and its dependencies. 
        \item  \textbf{module unload module\_name } - unload  the module with name \textit{module\_name} and its dependencies. 
        \item  \textbf{module list} - list all modules currently loaded.
        \end{itemize}
      \end{block}
      %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
 

     \end{column}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
    
    \begin{column}{.32\linewidth}
    \vskip-2ex
    \begin{columns}[t]
    \begin{column}{.54\linewidth}
      %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
      \begin{block}{Available Compilers}
        \vspace*{-2ex}
      \begin{center}
      \begin{tabular}{|c|c|c|c|}
      \hline 
      \textbf{Compiler} & \textbf{Intel} & \textbf{GNU} & \textbf{PGI} \\ 
      \hline 
      Fortran77 & ifort & g77 & pgf77 \\ 
      \hline 
      Fortran90 & ifort & gfortran & pgf90 \\ 
      \hline 
      Fortran95 & ifort & gfortran & pgf95 \\ 
      \hline 
      C & icc & gcc & pgcc \\ 
      \hline 
      C++ & icpc & g++ & pgCC \\ 
      \hline 
      Debug & idb & gdb & pgdbg \\ 
      \hline
      Profile & vtune & gprof & gpprof \\ 
      \hline 
      \end{tabular} 
      \end{center}
        \vspace*{-2ex}
      \end{block}
      %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
      \end{column}
     \hspace*{-0.3cm}
     \begin{column}{.35\linewidth}
      %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
      \begin{block}{Available MPIs}
        \vspace*{-2ex}
      \begin{center}
      \begin{tabular}{|c|c|}
      \hline 
      \textbf{MPI} & \textbf{version} \\ 
      \hline 
      Intel MPI & 4.1.0.024  \\ 
      \hline 
      OpenMPI & 1.4,1.6  \\ 
      \hline 
      MPICH2 & 1.5,3.0.4  \\ 
      \hline 
      PlatformMPI & 08.02  \\ 
      \hline 
      MVAPICH2 & 1.4.1p1  \\ 
      \hline 
      \end{tabular} 
      \end{center}
        \vspace*{-2ex}
      \end{block}
      %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
      \end{column}
  \end{columns}

 
       %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
      \begin{block}{Optimization flags}
        \vspace*{-2ex}
           \begin{center}
           \begin{tabular}{|c|c|c|c|}
           \hline 
           \textbf{Compiler} & \textbf{Intel} & \textbf{GNU} & \textbf{PGI} \\ 
           \hline 
           High Opt. & -fast & -O3 -ffast-math & -fast -Mipa=fast,inline \\ 
           \hline 
           OpenMP & -openmp & -fopenmp & -mp=nonuma \\ 
           \hline 
           Debug & -g & -g & -g \\ 
           \hline 
           Profile & -p & -pg & -p \\ 
           \hline 
           Westmere & -mtarget & -march=corei7  & -tp=nehalem-64 \\ 
           \hline 
           SandyBridge & -mtarget & -march=corei7-avx  & -tp=sandybridge-64 \\ 
           \hline 
           SSE & -xsse4.2 & -msse4.2 & -Mvect=[prefetch,sse] \\ 
           \hline 
           AVX$^1$ & -xavx & -mavx & -fast \\ 
           \hline 
           \end{tabular} 
           \begin{footnotesize}
            \\1. Advanced Vector Extension (AVX) streaming SIMD instructions. Sandy Bridge processor only.
            %2. for SandyBridge use : -march=corei7-avx\\
           \end{footnotesize}
           \end{center}
        \vspace*{-2ex}
      \end{block}
      %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
     
        %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
      \begin{block}{Link MKL with OpenMPI, CDFT, ScaLAPACK, BLACS and Intel Compilers}
      \textbf{Link line:} \verb|-L${MKLROOT}/lib/intel64 -lmkl_scalapack_ilp64 \|
      \verb|        -lmkl_cdft_core -lmkl_intel_ilp64 -lmkl_sequential \|
      \verb|        -lmkl_core -lmkl_blacs_intelmpi_ilp64 -lpthread -lm|\\
      \textbf{Compiler options: }      \verb|-DMKL_ILP64 -I${MKLROOT}/include|\\
      More information at \url{http://software.intel.com/sites/products/mkl/}
      \end{block}
      %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
 
 
         %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
      \begin{block}{Link MKL with OpenMP and Intel compilers}
      \textbf{Link line:} \verb|-L${MKLROOT}/lib/intel64 -lmkl_intel_ilp64 \|\\
      \verb|       -lmkl_intel_thread -lmkl_core -lpthread -lm|\\
      \textbf{Compiler options: } \verb|-openmp -DMKL_ILP64 -I${MKLROOT}/include|
      \end{block}
      %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
 
  %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
      \begin{block}{Slurm Commands}
        \begin{itemize}
        \item  \textbf{sbatch} sends a new job to the scheduler for execution
        \item  \textbf{sinfo} show the current list of classes.
        \item  \textbf{squeue} returns queue information 
         \begin{itemize}
              \item \verb|squeue -l -j <job id>| gives extended job record information.
              \item \verb|squeue -u <user name>| lists only jobs initiated by the user.
         \end{itemize}
        \item \textbf{scancel} kills a queued job: \verb|scancel <job id>|
        \end{itemize}
       More information about Slurm in the NeSI Slurm User Guide : \url{https://wiki.auckland.ac.nz/display/CER/Slurm+User+Guide}
      \end{block}
      %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

      %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
      \begin{block}{Limits}
        \vspace*{-2ex}
      \begin{center}
      \begin{tabular}{|c|c|c|}
      \hline 
      \textbf{Name} & \textbf{MaxJobCPU} & \textbf{Description} \\ 
      \hline 
      small1h & 41 &  Jobs running for under 1 hour (high priority)\\ 
      \hline 
      small6h & 41 & Jobs running for under 6 hours  (high priority)\\ 
      \hline 
      medium & 12500 &  Jobs running for under 1 week  (medium priority)\\ 
      \hline 
      long & unlimited &  Jobs running for longer than a week  (low priority)\\ 
      \hline 
      bigmem & unlimited &  Jobs that needs more than 12GB/core\\ 
      \hline 
      \end{tabular} 
      \end{center}
        \vspace*{-2ex}
      \end{block}
      %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

     \end{column}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
    
    \begin{column}{.32\linewidth}
    \vskip-2ex
    \begin{columns}[t]
    \begin{column}{.38\linewidth}
      %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
      \begin{block}{OpenSSH Access}
      \textbf{Parameters}
        \begin{itemize}
        \item host: login-01.uoa.nesi.org.nz
        \item port: 22
        \end{itemize}
       \textbf{Limits}
        \begin{itemize}
        \item CPU time: 60 minutes
        \item Memory : 2GB
        \end{itemize}
      \end{block}
      %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
      \end{column}
     \hspace*{-0.6cm}
     \begin{column}{.56\linewidth}
      %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
      \begin{block}{Suggested Software}
        \begin{itemize}
        \item Windows: \href{http://mobaxterm.mobatek.net/}{mobaxterm}, \href{http://www.chiark.greenend.org.uk/~sgtatham/putty/}{Putty}, \href{http://www.bitvise.com/tunnelier}{Bitvise Tunnelier}
        \item MacOSX: Terminal(Included in the OS), \href{http://www.iterm2.com/}{iTerm2}
        \item Linux: \href{http://konsole.kde.org/}{Konsole}, GnomeTerminal, \href{http://yakuake.kde.org/}{yakuake}
        \end{itemize}
      \end{block}
      %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
      \end{column}
  \end{columns}


     %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
      \begin{block}{interactive sessions}
      The interactive sessions will allow you to build the binaries for specific architecture. The binaries compiled in Westmere can run in Sandy Bridge, but it can \textbf{NOT} exploit all the Sandy bridge features. The binaries compiled in Sandy Bridge can \textbf{NOT} run in the Westmere nodes. The interactively usage is limited up to \textbf{24h} of \textbf{walltime}.
	 \begin{verbatim}
Usage: interactive [-A] [-a] [-c] [-m] [-J]
Mandatory arguments:
	 -A: account
Optional arguments:
	 -a: architecture (default: wm, values sb=SandyBridge wm=Westmere)
	 -c: number of CPU cores (default: 1)
	 -m: amount of memory (GB) per core (default: 1 [GB])
	 -J: job name
example : interactive -A nesi99999 -a wm -c 4 -J MyInteractiveJob
	\end{verbatim} 
      \end{block}

      %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

      %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
      \begin{block}{Remote File System Access}
       In order to access the file system (/home) remotely from your machine, we recommend:
        \begin{itemize}
        \item \textbf{SSHFS} (MacOSX) : \url{http://code.google.com/p/macfuse/}
        \item \textbf{SSHFS} (Linux) : \url{http://fuse.sourceforge.net/sshfs.html}
        \item \textbf{SSHFS} (Windows) : \url{http://code.google.com/p/win-sshfs/}
        \item \textbf{Konqueror} (KDE) : type fish://user@host:port
        \item \textbf{Nautilus} (Gnome) : type sftp://user@host:port
        \item \textbf{WinSCP} (Windows) : \url{http://winscp.net}
        \end{itemize}
      \end{block}
      %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
 
       %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
      \begin{block}{Remote File System Transfer with RSYNC (Unix Only)}
       \textbf{RSYNC} over SSH protocol is the best choice to transfer big data volumes.
        \begin{itemize}
        \item Transfer data from your machine to the server:\\ \verb|rsync -avHl  /path/origin/* sshserver:/path/destination/|
        \item Transfer data from the server to your machine:\\ \verb|rsync -avHl  sshserver:/path/destination/* /path/origin/|
        \end{itemize}
      \end{block}
      %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

       %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
      \begin{block}{Remote File System Transfer with scp/sftp (Unix Only)}
       \textbf{SCP} and \textbf{SFTP} are the most popular software to transfer data across the SSH protocol.
        \begin{itemize}
        \item \textbf{SCP}: \verb|scp -pr sshserver:/path/destination/* path/destination/|
        \item \textbf{SFTP}: \verb|sftp sshserver:/path/destination/* path/destination/|
        \end{itemize}
      \end{block}
      %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

 
       %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
      \begin{block}{Get Involved!}
       \centering{\includegraphics[scale=0.6]{img/avatar_19476.png}\\
       {\Large We would like to encourage you to send suggestions and feedback to the \href{mailto:support@nesi.org.nz}{NeSI Team}.}}
      \end{block}
      %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
 

    
 
    \end{column}
  \end{columns}
\end{frame}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                                                        NEW FRAME                                                     %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
 \begin{frame}[fragile]{} 
  \begin{columns}[t]
    \begin{column}{.35\linewidth}


      %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
      \begin{block}{Submit Script Example : Serial}
              \vspace*{-3ex}
        \begin{verbatim}
#!/bin/bash
#SBATCH -J OpenMP_JOB
#SBATCH -A uoa99999         # Project Account
#SBATCH --time=01:00:00     # Walltime
#SBATCH --mem-per-cpu=8132  # memory/cpu (in MB)
#SBATCH -C sb               # sb=Sandybridge,wm=Westmere
srun serial_binary
        \end{verbatim}
                \vspace*{-4ex}
      \end{block}
      %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

      %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
      \begin{block}{Submit Script Example : OpenMP}
              \vspace*{-3ex}
        \begin{verbatim}
#!/bin/bash
#SBATCH -J OpenMP_JOB
#SBATCH -A uoa99999         # Project Account
#SBATCH --time=01:00:00     # Walltime
#SBATCH --mem-per-cpu=8132  # memory/cpu (in MB)
#SBATCH --cpus-per-task=8   # 8 OpenMP Threads
#SBATCH -C sb               # sb=Sandybridge,wm=Westmere
srun openmp_binary
        \end{verbatim}
                \vspace*{-4ex}
      \end{block}
      %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

      %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
      \begin{block}{Submit Script Example : MPI}
              \vspace*{-3ex}
        \begin{verbatim}
#!/bin/bash
#SBATCH -J MPI_JOB
#SBATCH -A uoa99999         # Project Account
#SBATCH --time=01:00:00     # Walltime
#SBATCH --ntasks=2          # number of tasks
#SBATCH --mem-per-cpu=8132  # memory/cpu (in MB)
#SBATCH -C sb               # sb=Sandybridge,wm=Westmere
srun mpi_binary
        \end{verbatim}
                \vspace*{-4ex}
      \end{block}
      %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

      %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
      \begin{block}{Submit Script Example : Hybrid (MPI+OpenMP)}
              \vspace*{-3ex}
        \begin{verbatim}
#!/bin/bash
#SBATCH -J Hybrid_JOB
#SBATCH -A uoa99999         # Project Account
#SBATCH --time=01:00:00     # Walltime
#SBATCH --ntasks=4          # number of tasks
#SBATCH --mem-per-cpu=8132  # memory/cpu (in MB)
#SBATCH --cpus-per-task=8   # 8 OpenMP Threads
#SBATCH --nodes=1           # number nodes
srun binary_hybrid
        \end{verbatim}
                \vspace*{-4ex}
      \end{block}
      %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

      %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
      \begin{block}{Submit Script Example : Hybrid (MPI+CUDA)}
              \vspace*{-3ex}
        \begin{verbatim}
#!/bin/bash
#SBATCH -J GPU_JOB
#SBATCH --time=01:00:00     # Walltime
#SBATCH -A uoa99999         # Project Account
#SBATCH --ntasks=4          # number of tasks
#SBATCH --ntasks-per-node=2 # number of tasks per node
#SBATCH --mem-per-cpu=8132  # memory/cpu (in MB)
#SBATCH --cpus-per-task=4   # 4 OpenMP Threads
# The following line will request GPUs per node. In this particular 
# example, it means 4 GPUs in total.
#SBATCH --gres=gpu:2       
#SBATCH -C kepler
srun binary_cuda_mpi
        \end{verbatim}
                \vspace*{-4ex}
      \end{block}
      %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

    \end{column}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
    
    \begin{column}{.3\linewidth}
    
 
     %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
      \begin{block}{Submit Script Syntax}
        \begin{itemize}
        \item \textbf{\-A uoa99999} User account (uoaXXXXX, uocXXXXX, uooXXXXX, landcareXXXXX or nesiXXXX)
        \item \textbf{\-\-mem-per-cpu=8132} = memory/cpu (in MB)
        \item \textbf{-J My\_Job\_Name} Sets the job name
        \item \textbf{\-\-mail-type=ALL} Specifies under which conditions Slurm will send out email notifications to the specified address about the state of the job:
        \begin{itemize}
            \item ALL - notifies about every change in the job status
            \item START - notifies when the job is activated
            \item END - notifies when the job ends
            \item ERROR - notifies only if the job fails
            \item NEVER - never send any notifications
        \end{itemize}
        \item \textbf{--mail-user=username@nesi.org.nz} user email
        \item \textbf{--cpus-per-task=8} Sets the number of cores to be allocated for each task
        \item \textbf{--gres=gpu:1|2} Specifies what consumable resources the job requires to run per task:
        \begin{itemize}
            \item gpu:1|2 - default 1 GPU per node
            \item mic:1|2 - default 1 Intel Xeon Phi per node
        \end{itemize}
        %\item \textbf{requirements} Can be (Feature=="sandybridge") or (Feature=="westmere")
        \item \textbf{\-\-ntasks-per-node=16} specifies the total number of tasks (cores) to be run on each available node.
        \item \textbf{\-\-ntasks=96} specifies how many tasks (cores) are to be run in total
        \item \textbf{\-\-time=01:00:00} Sets the limit for the elapsed time for which a job can run
        \end{itemize}
      \end{block}
      %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

      %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
      \begin{block}{Recommended Best Practices}
      \begin{itemize}
         \item Use the \textbf{SubmitScripts Templates} that are in /share/SubmitScripts.
         \item Ask for the minimum nodes for the specified number of cores for the very large jobs. It will take more time to enter in execution but will finish with less walltime.
        \end{itemize}
      \end{block}
      %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
 

    \end{column}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
    
    \begin{column}{.35\linewidth}
    
      %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
      \begin{block}{Submit Script Example : Job Array}
              \vspace*{-3ex}
        \begin{verbatim}
#!/bin/bash
#SBATCH -J JobArray
#SBATCH --time=01:00:00     # Walltime
#SBATCH -A uoa99999         # Project Account
#SBATCH --ntasks=1          # number of tasks
#SBATCH --mem-per-cpu=8132  # memory/cpu (in MB)
#SBATCH --cpus-per-task=4   # 4 OpenMP Threads
#SBATCH --array=1-1000      # Array definition
#SBATCH -C sb               # sb=Sandybridge,wm=Westmere
srun binary_array $SLURM_ARRAY_TASK_ID
        \end{verbatim}
                \vspace*{-4ex}
      \end{block}
      %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


      %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
      \begin{block}{Grisu Command Line Interface (griclish)}
        \begin{itemize}
        \item \verb|help| - displays help menu
        \item \verb|help <keyword>| - displays help about a keyword
        \item \verb|attach <path_to_file>| - attaches a file to the next job
        \item \verb|set <property> <value>| - sets a value for the next job
        \item \verb|submit <command_to_run>| - submits a job
        \item \verb|print jobs| - lists all jobs and their statuses
        \item \verb|print job <jobname>| - displays details about a job
        \end{itemize}
      \end{block}
      %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
      
    \end{column}
  \end{columns}
\end{frame}

\end{document}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%% Local Variables: 
%%% mode: latex
%%% TeX-PDF-mode: t
%%% End: 
